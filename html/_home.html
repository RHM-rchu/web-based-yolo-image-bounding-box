<%
path_image = ""
last_image = ""
selected = ""
%>
<div class="wrapper">
    <div class="middle">
        <div class="container">
            <main class="content">
                <label for="ice-cream-choice">Choose Class:</label>
                <input type="text" name="selectClass" id="selectClass" placeholder="-------" list="checkName" onchange="this.blur();" required>
                <datalist id="checkName">
                    % for theClass in class_data:
                    <option value="${theClass}">${theClass}</option>
                    % endfor
                </datalist><span class="canvasarea_name"></span>
                <br>
                <canvas id="canvasarea" widthx="600px" heightx="300px"></canvas>
                <br>
                <!-- Canvas Info -->
                <div>
                    <input id="button_save" class="button_text" type="submit" name="Save" value="Save" />
                    <div id="coords">
                    </div>
                    <div id="coords_mc"></div>
                </div>
            </main>
        </div>
        <aside class="left-sidebar">
            <div class="" id="message_display">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            </div>
            <div id="image_list">
                <ol>
                    % for img in imageLists:
                    <%
last_image = imageLists[img]['image_path']
%>
                    % if imageLists[img]['txt_path'] == "" and path_image == "":
                    <%
path_image = imageLists[img]['image_path']
selected_image = ' active'
%>
                    % else:
                    <%
selected_image = ''
%>
                    % endif
                    <li class="imagelist${selected_image}${' hasCoords'  if imageLists[img]['txt_path'] else ' needsCoords'}">${imageLists[img]['image_path']}</li>
                    % endfor
                </ol>
            </div>
            <div class="imglist-footer">
                <div id="next_img" class="next_img"><input class="button_text" type="submit" name="Next" value="Next" /></div>
                <div id="prev_img" class="prev_img"><input class="button_text" type="submit" name="Prev" value="Prev" /></div>
            </div>
            <div id="progress">
                <progress data-label="" id="drawboxstatus" max="100" value="0"></progress>
            </div>
            <div class="instruction">
                <ol>
                    <li>Select Class in Dropdown</li>
                    <li>Draw a box around object</li>
                    <li>Deleting Boxes: Right or Center Wheel Click to delete a box</li>
                    <li>Only way to remove ALL boxes is to click Save under the image</li>
                    <li>Click Next or Prev or Save to commit your boxes</li>
                </ol>
            </div>
            <div id="projects">

                <form method="post" id="fileinfo" name="fileinfo" onsubmit="return submitForm();">
                <label>Select Project:</label><br>
                <select>
            % for dir in dirLists:
                % if dir == training_project:
<%
selected = " selected"
%>
                % else:
<%
selected = ""
%>
                % endif
                <option${selected}>${dir}</option>
            % endfor
                </select><input class="button_text" type="submit" name="change" value="Change Projects" />
                </form>
            </div>
        </aside>
    </div>
    <footer class="footer">

        <div id="progress-upload">
            <progress data-label="0" id="upload-status" max="100" value="0"></progress>
        </div>
        Upload ZIP of images: <input id="img_files" name="file" type="file" />
    </footer>
</div>
<script src="html/assets/ui.js"></script>
<script src="html/assets/upload.js"></script>
<script type="text/javascript">
image_path = '${path_image  if path_image else last_image}'; //Load Image ;
project = '${training_project}'
$(document).ready(function() {
    $('#message_display').hide();
    drawRectangleOnCanvas.loadImage(image_path);
    show_next_prev_or_not();
});

</script>
<script src="html/assets/drawRectangles.js"></script>
